# AegisMint Token Control - Testing Guide

## Overview
This guide provides comprehensive step-by-step instructions for testing the AegisMint Token Control system. The system consists of two main components:
1. **Desktop Applications** (Mint and Token Control) - Windows desktop applications for token management
2. **Web Application** (Governance Portal) - Browser-based portal for administration and governance

## Prerequisites

### Required Applications
- **Mint Desktop App**: Windows application for initial token setup and share generation. Can be uninstalled after completing the token creation process.
- **Token Control Desktop App**: Windows application for token operations. Can be deployed on multiple computers using shares generated by the Mint application.
- **Web Browser**: Latest version of Chrome, Edge, or Firefox
- **Internet Connection**: Active internet connection required to communicate with the governance server

### Test User Accounts

- **Admin Portal**: For managing desktops and users (OTP authentication required via authenticator app)
  - Admin credentials: admin@example.com / ChangeMe123!
- **Governance Users**: Two accounts for testing the multi-approval process (OTP authentication required via authenticator app)
  - Primary Governance User: gov@example.com / GovPass123!
  - Secondary Governance User: new2@example.com / finebyme@400users

### System URLs
- **Admin and Governance Portal**: https://apkserve.com/governance

---

## Test Scenario 0: Initial Mint Application Setup

This scenario covers the installation of the Mint application, creation of the genesis key, and smart contract deployment.

### Step 0.1: Launch the Mint Application

**Purpose**: Verify the Mint application launches correctly and displays the initial interface.

**Test Steps**:
1. Double-click the "Aegis Mint" desktop icon to launch the application
2. Observe the initial application state

**Expected Results**:
- Application window opens successfully
- All controls are disabled except the "Generate Treasury" button

---
 Address

**Purpose**: Create an Ethereum address that will serve as the treasury wallet for token operations across blockchain networks.

**Test Steps**:
1. Click the "Generate Treasury" button

**Expected Results**:
- Treasury Address field populates with a newly generated Ethereum address

**Next Actions**:
- Fund this address with ETH for gas fees
- For testnet deployments, obtain test ETH from:
- If it is testnet then you can get test ether from https://cloud.google.com/application/web3/faucet/ethereum/sepolia

---
Smart Contract and Generate Shares

**Purpose**: Deploy the token smart contract to the blockchain and generate cryptographic shares for distributed key management.

**Prerequisites**: 
- Verify the Treasury Address has sufficient ETH balance (displayed in the "Treasury ETH" field)

**Test Steps**:
1. Enter "Token Name" (e.g., "MyToken")
2. Enter "Number of Tokens" (total supply)
3. Enter "Number of Decimal Places" (typically 18)
4. Enter "Number of Shares" (total shares to generate)
5. Enter "Number Needed to Generate Key" (threshold for key recovery)
6. Click the "Mint Token" button

**Expected Results**:
- Deployment progress indicator appears
- File dialog prompts for share save location
- Deployment process completes within 1-2 minutes
- "Contract Address" field populates with the deployed token contract address
- When process is complete then Contract Address will have the Token Contract Address.

--- Token Creation Process

**Post-Deployment Actions**:
- The Mint application can now be uninstalled or retained on the system
- Distribute the generated shares securely to authorized stakeholders
- Proceed with Token Control application installation
### Step 0.4: CompleDesktop Registration and Authorization

---
---

This scenario tests the complete workflow of registering a new desktop computer and obtaining multi-party approval for operation.

### Step 1.1: Initial Desktop Registration

**Purpose**: Verify the Token Control application can successfully register itself with the governance system.

**Test Steps**:
1. Double-click the "Token Control" desktop icon to launch the application
2. Observe the registration sequence

**Expected Results**:
- Locked screen displays with padlock icon (ðŸ”’)
- Initial message: "Checking authorization..."
- Registration confirmation message: "Your application has been registered and is pending approval by an administrator. The application will close now. Please restart after approval."
- Application automatically closes after approximately
**What You Should See**:
- A locked screen appears with a padlock icon (ðŸ”’)
- Message says: "Checking authorization..."
- After a few seconds, message changes to: "Your application has been registered and is pending approval by an administrator. The application will close now. Please restart after approval."
- Application aerify Pending Desktop Registration

---

### Step 1.2: View Approval

**Purpose**: Confirm that administrators can view newly registered desktops awaiting approval.

**Test Steps**:
1. Open a web browser
2. Navigate to the Admin Portal: https://apkserve.com/governance
3. Log in using admin credentials
4. Select "Desktops" from the navigation menu
5. Locate the newly registered desktop in the pending list

**Expected Results**:
- Desktop appears in the pending desktops list
- Status indicator displays "Pending" (yellow/orange color)
- Desktop details are visible:
  - Computer name and Windows username
  - Unique DesktopAppId
  - Required Approvals: 2
  - Unlock Duration: 15 minutesor orange
- You can see:
  - Computer name & Windows username
  - DesktopAppId
  - Required Apdministrator Desktop Approval

---

### Step 1.3: Approve Desktop 

**Purpose**: Verify that administrators can approve registered desktops for governance assignment.

**Test Steps**:
1. In the Admin Portal, select the pending desktop from the list
2. Review the desktop information displayed
3. Click the "Approve" button

**Expected Results**:
- Status updates from "Pending" to "Active"
- Success notification displays: "Desktop approved successfully"
- Desktop moves toutton

**What You Should See**:
- Status changes from "Pending" to "Active"
- A success message appears (e.g., "Desktop approved successfully")
- Desktop now appears in the "Active Desktops" section
Authorities

---
### Step 1.4: Assign to governance

**Purpose**: Verify that administrators can assign desktops to governance users who will provide multi-party authorization.

**Test Steps**:
1. Navigate to the "Governance Authorities" section in the Admin Portal
2. Locate "gov@example.com" in the user list
3. Click the "Assign" button for this user
4. In the popup dialog, view available desktops
5. Select the checkbox next to your newly approved desktop
6. Click "Save Assignments"
7. Confirm the dialog closes

**Repeat assignment for second governance user**:
1. Locate "new2@example.com" in the user list
2. Click the "Assign" button
3. Select the checkbox for your desktop
4. Click "Save Assignments"

**Expected Results**:
- Assignment dialog displays all available desktops (both assigned and unassigned)
- Dialog closes automatically after saving
- Both governance users display the desktop in their assigned desktop list
**What You Should See**:
- Popup shows list of desktops (assigned and unassigned)
- After clicking "Save Assignments", popup closes
- Both users now show your desktop in their assigned desktops


---

### Step 1.5: Initiate Access Request

**Purpose**: Verify that the Token Control application detects approval requirements and enters polling mode.

**Test Steps**:
1. Return to the desktop computer
2. Launch the Token Control application again
3. Observe the application behavior

**Expected Results**:
- Brief message: "Checking authorization..."
- Authorization message displays: "Access requires approval from 2 administrator(s). Current approvals: 0. Please wait for authorization."
- Locked screen with padlock icon remains visible
- Application remains running (does not close automatically)
- Automatic authorization check occurs every 30 seconds


---

### Step 1.6: First Governance Authority Approval

**Purpose**: Verify that the first governance user can provide their approval for desktop access.

**Test Steps**:
1. Open a web browser
2. Navigate to: https://apkserve.com/governance
3. Log in with credentials: gov@example.com (use provided password)
4. Locate your desktop in the displayed list
5. Verify the "Approve" button is visible
6. Click the "Approve" button

**Expected Results**:
- Pre-approval state: Approvals column displays "0/2"
- Post-approval state: Approvals column updates to "1/2 Session: Pending"
- Desktop remains locked (awaiting second approval)


---

### Step 1.7: Second Governance Authority Approval

**Purpose**: Verify that the second governance user can provide the final approval required to unlock the desktop.

**Test Steps**:
1. **Log out** from the first governance user account (gov@example.com)
2. Navigate to: https://apkserve.com/governance
3. Log in with credentials: new2@example.com (use provided password)
4. Locate your desktop in the list
5. Verify the approval status displays "1/2 Session: Pending"
6. Click the "Approve" button

**Expected Results**:
- Pre-approval state: Displays "1/2 Session: Pending"
- Post-approval state: Updates to "2/2 Unlocked" with active countdown timer
- Timer displays remaining access time (e.g., "14:30 remaining")


---

### Step 1.8: Automatic Desktop Unlock

**Purpose**: Verify that the Token Control application automatically detects full authorization and unlocks the interface.

**Test Steps**:
1. Return to the Token Control desktop application
2. Wait up to 30 seconds for the next authorization check
3. Observe the interface transition

**Expected Results**:
- Locked screen disappears
- Main application interface becomes accessible
- Window title bar displays: "Aegis Token Control - SEPOLIA - 14:32 remaining"
- Countdown timer updates every second
- All Token Control features are now operational

---

### Step 1.9: Recover Cryptographic Keys Using Shares

**Purpose**: Verify that the Token Control application can reconstruct the genesis key from distributed shares and retrieve blockchain data.

**Test Steps**:
1. Click the "Recover" button
2. Select or provide the minimum required number of shares
3. Monitor the recovery process

**Expected Results**:
- Upon reaching the minimum share threshold, the application reconstructs the genesis key
- Treasury Address populates in the interface
- Contract address is retrieved from the blockchain
- Current ETH and token balances are displayed for the treasury address


---

### Step 1.10: Verify Countdown Timer Functionality

**Purpose**: Confirm that the access countdown timer functions accurately and displays correctly.

**Test Steps**:
1. With the application unlocked, locate the countdown timer in the title bar
2. Observe the timer behavior for 1 minute
3. Note the display format and countdown accuracy

**Expected Results**:
- Timer format: "MM:SS remaining" (e.g., "14:59 remaining")
- Timer decrements every second (14:59 â†’ 14:58 â†’ 14:57...)
- Timer maintains accuracy (real-time correspondence)
- Low time display: "0:45 remaining", "0:30 remaining", etc.


---

### Step 1.11: Access Expiration and Auto-Lock

**Purpose**: Verify that the application automatically locks when the authorized access period expires.

**Test Steps**:
1. Allow the countdown timer to reach 0:00 (wait naturally or request admin to set a shorter duration for testing)
2. Observe application behavior at timer expiration

**Expected Results**:
- Timer displays "0:00 remaining"
- Locked screen immediately appears
- Expiration message: "Your access time has expired. The application cannot be used until re-approved."
- Main application interface becomes inaccessible
- Title bar updates to: "Aegis Token Control - SEPOLIA" (countdown removed)

---

## Test Scenario 2: Error Handling and Recovery

This scenario validates the application's error handling capabilities and recovery mechanisms.

### Step 2.1: Network Connection Failure

**Purpose**: Verify that the application displays appropriate error messages when the governance server is unreachable.

**Test Steps**:
1. **(Coordinate with technical staff to temporarily disable the backend server or disconnect network access)**
2. Launch the Token Control application without network connectivity
3. Observe the error handling behavior

**Expected Results**:
- Locked screen displays with error notification
- Error message: "Network error: Unable to connect to the governance server..."
- "Retry Connection" button is visible and accessible
- Locked screen persists (does not auto-dismiss)


---

### Step 2.2: Connection Recovery

**Purpose**: Verify that the retry mechanism successfully reconnects when the server becomes available.

**Test Steps**:
1. With the error screen displayed, **restore network connectivity or restart the server**
2. Wait a few seconds for server initialization
3. Click the "Retry Connection" button

**Expected Results**:
- Status message updates to "Retrying connection..."
- **If approvals are valid**: Application unlocks and displays countdown timer
- **If approvals have expired**: Message indicates re-approval is required


---

## Test Scenario 3: Governance Portal Functionality

This scenario validates the features and capabilities of the governance web portal.

### Step 3.1: Desktop List View

**Purpose**: Verify that governance users can view all desktops assigned to their authority.

**Test Steps**:
1. Navigate to https://apkserve.com/governance
2. Log in using gov@example.com credentials
3. Review the main desktop listing page

**Expected Results**:
- Complete list of assigned desktops is displayed
- Each desktop entry shows:
  - Computer name
  - Windows username
  - Current status (Pending/Unlocked/Expired)
  - Approval progress (0/2, 1/2, 2/2)
  - Active countdown timer (if unlocked)
  - "Approve" button (if awaiting approval)

---
Real-Time Approval Status

**Purpose**: Verify that the portal accurately displays approval progress and updates in real-time.

**Test Steps**:
1. Ensure one desktop is awaiting approval (0/2 state)
2. As the first user (gov@example.com), click "Approve"
3. Log in as the second user (new2@example.com) and view the same desktop

**Expected Results**:
- Initial state: Displays "0/2"
- After first approval: Updates to "1/2 Session: Pending"
- After second approval: Shows "2/2 Unlocked (14:32 remaining)"
- Countdown timer decrements in real-time within the web interfac4:32 remaining)"
- Timer counts down in real-time on the web page

---
-Desktop Management

This scenario validates the system's ability to manage multiple independent desktop instances simultaneously.

### Step 4.1: Concurrent Desktop Operations

**Purpose**: Verify that the system can handle multiple desktops with independent states and approval workflows.

**Test Steps**:
1. Register 3 different desktop computers (or configure test data with 3 desktops)
2. In the Admin Portal, approve 2 desktops and leave 1 in pending status
3. Assign all 3 desktops to governance users
4. Configure different approval states:
   - Desktop 1: Obtain both approvals (fully unlocked)
   - Desktop 2: Obtain single approval (partially approved)
   - Desktop 3: No approvals (awaiting authorization)

**Expected Results**:
- All 3 desktops display as separate entries in portal lists
- Each desktop maintains a unique identifier (DesktopAppId)
- Independent state tracking:
  - Desktop 1: Unlocked with active countdown timer
  - Desktop 2: Partially approved (1/2)
  - Desktop 3: Awaiting approvals (0/2)
- Approval actions on one desktop do not affect others
- Each unlocked desktop maintains its own independent countdown timer
- Each has its own Guide

### Terminology
- **Desktop/Token Control**: Windows desktop application for token management operations
- **Governance Portal**: Web-based interface for governance users to approve/deny access requests
- **Admin Portal**: Web-based interface for administrators to manage desktops, users, and system configuration
- **Approval**: Authorization granted by governance users to enable Token Control access
- **Countdown Timer**: Visual indicator showing remaining authorized access time
- **Locked Screen**: Security interface displayed when access is denied, pending,s requests
- **Admin Portal**: The website where administrators manage desktops and users
- **Approval**: PermGuide

#### Network Connectivity Issues
**Symptom**: Application displays "Network error"  
**Resolution Steps**: 
1. Verify internet connectivity
2. Click "Retry Connection" button
3. If error persists, contact technical support

#### Authorization Not Detected
**Symptom**: Countdown timer doesn't appear after receiving approvals  
**Resolution Steps**:
1. Wait 30 seconds for automatic authorization check
2. Restart the Token Control application
3. Verify both governance users have approved the access request
4. Check governance portal to confirm "2/2 Unlocked" status

#### Portal Authentication Failures
**Symptom**: Unable to log into governance portal  
**Resolution Steps**:
1. Verify email address is entered correctly
2. Confirm password accuracy (case-sensitive)
3. Use password reset functionality if needed
4. Contact system administrator for account verification

#### Desktop Visibility Issues
**Symptom**: Desktop not appearing in governance user's list  
**Resolution Steps**:
1. Confirm desktop has been approved by administrator
2. Verify desktop is assigned to your user account
3. Refresh the web page (F5 or browser refresh button)
4. Log out and log back in to refresh session data
- Verify desktop was approved by administrator
- Check desktop is assigned to your user account
- Refresh the web page
- Log out and log back in

